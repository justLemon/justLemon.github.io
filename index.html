<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>justLemon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="justLemon&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="justLemon">
<meta property="og:url" content="http://qiuchabin.me/index.html">
<meta property="og:site_name" content="justLemon">
<meta property="og:description" content="justLemon&apos;s blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="justLemon">
<meta name="twitter:description" content="justLemon&apos;s blog">
  
    <link rel="alternate" href="/atom.xml" title="justLemon" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">justLemon</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Anything But Ordinary</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://qiuchabin.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-github上使用hexo搭建个人博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/15/github上使用hexo搭建个人博客/" class="article-date">
  <time datetime="2017-04-15T08:00:00.000Z" itemprop="datePublished">2017-04-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/15/github上使用hexo搭建个人博客/">github上使用hexo搭建个人博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一-安装hexo"><a href="#一-安装hexo" class="headerlink" title="一 安装hexo"></a>一 安装hexo</h3><p>安装hexo需要用到Node.js的包管理工具npm，如果没有安装node的请先安装node。<br>此外还需要用到Git工具，也需要提前安装好。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//安装hexo</div><div class="line">npm install -g hexo-cli</div></pre></td></tr></table></figure></p>
<h3 id="二创建并配置博客"><a href="#二创建并配置博客" class="headerlink" title="二创建并配置博客"></a>二创建并配置博客</h3><p>安装完hexo后，我们开始在本地搭建一个静态博客系统</p>
<h5 id="1-创建博客系统"><a href="#1-创建博客系统" class="headerlink" title="1.创建博客系统"></a>1.创建博客系统</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 建立一个博客文件夹myblog，并初始化博客</div><div class="line">hexo init myblog</div><div class="line">// 进入博客文件夹</div><div class="line">cd myblog</div><div class="line">// node.js的命令，根据博客既定的dependencies配置安装所有的依赖包</div><div class="line">npm install</div></pre></td></tr></table></figure>
<h5 id="2-博客系统目录"><a href="#2-博客系统目录" class="headerlink" title="2.博客系统目录"></a>2.博客系统目录</h5><ol>
<li>scaffolds ：模板文件夹，新建文章时，Hexo 会根据 scaffold 来建立文件。Hexo 有三种默认布局： post、page和draft,它们分别对应不同的路径。新建文件的默认布局是post，可以在配置文件中更改布局。用draft布局生成的文件会被保存到 source/_drafts 文件夹。</li>
<li>source : 资源文件夹是存放用户资源的地方。</li>
<li>source/_post ：文件箱,存放博客我们写的博客的地方，除 <em>posts 文件夹之外，开头命名为 </em> (下划线)的文件/ 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。</li>
<li>themes ：主题文件夹。Hexo 会根据主题来生成静态页面。</li>
<li>themes/landscape ：默认的皮肤文件夹。</li>
<li>_config.yml ：全局的配置文件，每次更改要重启服务。</li>
<li>public  : hexo generate生成的静态博客目录，与远程github仓库上的内容相同。</li>
</ol>
<h5 id="3-配置博客"><a href="#3-配置博客" class="headerlink" title="3.配置博客"></a>3.配置博客</h5><p>上一步创建了博客系统，基于上一步，我们对博客修改相应的配置，配置都在_config.yml文件中。我们并不需要配置所有的项，我们首次部署需要配置的地方已经在下面列出来，其他还有很多配置项需要我们自己慢慢去学习。<br>配置网站信息Site：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//主标题</div><div class="line">title: justLemon</div><div class="line">//副标题</div><div class="line">subtitle: Anything But Ordinary </div><div class="line">//网站描述</div><div class="line">description: justLemon&apos;s blog</div><div class="line">//语言</div><div class="line">language: zh-CN</div><div class="line">//时区</div><div class="line">timezone: Asia/Shanghai</div></pre></td></tr></table></figure></p>
<p>配置目录信息Directory：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//不渲染成HTML的文件为README.md，此文件是github项目根目录下的说明文件。</div><div class="line">skip_render: README.md</div></pre></td></tr></table></figure></p>
<p>配置部署信息Deployment：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repo: https://github.com/justLemon/justLemon.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure></p>
<p>配置结束之后执行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure></p>
<p>执行这条命令使得我们可以把本地博客内容推送到github pages上。</p>
<h3 id="三-博客本地运行与远程推送"><a href="#三-博客本地运行与远程推送" class="headerlink" title="三 博客本地运行与远程推送"></a>三 博客本地运行与远程推送</h3><h5 id="1-本地运行"><a href="#1-本地运行" class="headerlink" title="1.本地运行"></a>1.本地运行</h5><p>运行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo server</div></pre></td></tr></table></figure></p>
<p>浏览器访问<a href="http://localhost:4000/，就可以在本地看到刚建立的博客。" target="_blank" rel="external">http://localhost:4000/，就可以在本地看到刚建立的博客。</a></p>
<h5 id="2-写新的博客"><a href="#2-写新的博客" class="headerlink" title="2.写新的博客"></a>2.写新的博客</h5><p>可以用下面的命令新建一个文章<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new &apos;blogTest&apos;</div></pre></td></tr></table></figure></p>
<p>也可以把新的markdown格式的文件放到 source/_post 下，注意新的markdown文件的头部需要有一些标题、时间等信息。</p>
<h5 id="3-远程推送"><a href="#3-远程推送" class="headerlink" title="3.远程推送"></a>3.远程推送</h5><p>每次写了新的博客，都要把本地内容推送到远程github仓库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//将新的内容放到到本地public文件夹</div><div class="line">hexo generate</div><div class="line">//将public文件夹推送到远程github仓库</div><div class="line">hexo deploy</div></pre></td></tr></table></figure></p>
<p>注意：如果windows的cmd中运行hexo deploy中出现spawn git ENOENT错误，则改在git shell中执行此命令。 </p>
<p>其他hexo命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//清空本地public文件夹</div><div class="line">hexo clean</div><div class="line">//新建文章</div><div class="line">hexo new &quot;postName&quot; </div><div class="line">//新建页面</div><div class="line">hexo new page &quot;pageName&quot; </div><div class="line">//帮助</div><div class="line">hexo help</div><div class="line">//查看Hexo的版本</div><div class="line">hexo version</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2017/04/15/github上使用hexo搭建个人博客/" data-id="cj1lx27r30006xgo0sfbc3yh9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ES6新特性之promise" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/09/ES6新特性之promise/" class="article-date">
  <time datetime="2017-04-09T07:51:00.000Z" itemprop="datePublished">2017-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/09/ES6新特性之promise/">ES6新特性之promise</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一-Promise简介"><a href="#一-Promise简介" class="headerlink" title="一 Promise简介"></a>一 Promise简介</h3><p>ES6 原生提供了 Promise 对象,Promise对象相当于状态转换机，一共有三个状态Pending（未完成）、Resolved（成功）、Rejected（失败）。且状态的改变只有两种可能：从 Pending 变为 Resolved 和从 Pending 变为 Rejected。<br>promise的基本用法如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//生成promise实例</span></div><div class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line"> <span class="comment">//...other code...</span></div><div class="line"> <span class="keyword">if</span> (<span class="comment">/* 异步操作成功 */</span>)&#123;</div><div class="line">   resolve(value);<span class="comment">//resolve函数将Promise对象的状态从Pending变为Resolved</span></div><div class="line"> &#125; <span class="keyword">else</span> &#123;</div><div class="line">   reject(error);<span class="comment">//reject函数将Promise对象的状态从Pending变为Rejected</span></div><div class="line"> &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">//Promise实例生成以后，用then方法分别指定Resolved状态和Reject状态的回调函数。</span></div><div class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line"> <span class="comment">// success</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line"> <span class="comment">// failure</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="二-Promise基本API"><a href="#二-Promise基本API" class="headerlink" title="二 Promise基本API"></a>二 Promise基本API</h3><ul>
<li><p>（1）Promise.resolve()<br>Promise.resolve(value)方法返回一个以给定值解析后的Promise对象。value值可以是Promise实例、thenable对象、或者其他JavaScript值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//value是字符串</span></div><div class="line"><span class="built_in">Promise</span>.resolve(<span class="string">"hello"</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// "hello"</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//value是数组</span></div><div class="line"><span class="built_in">Promise</span>.resolve([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// [ 1, 2, 3 ]</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//value是promise</span></div><div class="line"><span class="built_in">Promise</span>.resolve(<span class="built_in">Promise</span>.resolve(<span class="string">'hello'</span>)).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// hello</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//value是thenable</span></div><div class="line"><span class="keyword">let</span> thenable = &#123;</div><div class="line">  <span class="attr">then</span>: <span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    resolve(<span class="number">222</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">Promise</span>.resolve(thenable).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// 222</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>（2）Promise.reject()<br>Promise.reject(reason)方法返回一个被拒绝的Promise实例。与Promise.resolve(value)不同的是，Promise.reject()方法的参数，会原封不动地传递给回掉函数reject。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> thenable = &#123;</div><div class="line">  <span class="attr">then</span>: <span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    resolve(<span class="number">222</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">Promise</span>.reject(thenable).catch(<span class="function"><span class="keyword">function</span>(<span class="params">reason</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(reason == thenable); <span class="comment">// true</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>（3）Promise.prototype.then()<br>Promise.then()方法返回一个  Promise。它最多需要有两个参数：Promise的成功和失败情况的回调函数。</p>
</li>
<li>（4）Promise.prototype.catch()<br>Promise.catch() 方法返回一个Promise，只处理拒绝的情况。它的行为与调用Promise.prototype.then(undefined, onRejected) 相同。</li>
<li><p>（5）Promise.all()<br>Promise.all方法指当所有在可迭代参数中的promises已完成，或者第一个传递的 promis失败(reject)时，返回 promise。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="string">'promise1'</span>);</div><div class="line"><span class="keyword">var</span> p2 = <span class="built_in">Promise</span>.resolve(<span class="string">'promise2'</span>);</div><div class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">  setTimeout(resolve, <span class="number">100</span>, <span class="string">"promise3"</span>);</div><div class="line">&#125;); </div><div class="line"><span class="built_in">Promise</span>.all([p1, p2, p3]).then(<span class="function"><span class="params">values</span> =&gt;</span> &#123; </div><div class="line">  <span class="built_in">console</span>.log(values); <span class="comment">// [ 'promise1', 'promise2', 'promise3' ]</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//只有当p1,p2,p3状态都是resolved时候，返回的新promise状态才为resolved</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="string">'promise1'</span>);</div><div class="line"><span class="keyword">var</span> p2 = <span class="built_in">Promise</span>.resolve(<span class="string">'promise2'</span>);</div><div class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">  setTimeout(reject, <span class="number">100</span>, <span class="string">"promise3 rejected"</span>);</div><div class="line">&#125;); </div><div class="line"><span class="built_in">Promise</span>.all([p1, p2, p3]).then(<span class="function"><span class="keyword">function</span>(<span class="params">values</span>)</span>&#123; </div><div class="line">    <span class="built_in">console</span>.log(values); <span class="comment">// promise3 rejected</span></div><div class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">reason</span>)</span>&#123; <span class="built_in">console</span>.log(reason); &#125;);</div><div class="line"><span class="comment">//只要p1,p2,p3之中有一个状态是rejected，返回的新promise的状态就是rejected</span></div></pre></td></tr></table></figure>
</li>
<li><p>（6）Promise.race()<br>Promise.race方法返回一个promise，在可迭代的promises中有一个promise先完成或失败，就返回新的promise，其状态与最先发生状态改变的promise的状态一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">  setTimeout(resolve, <span class="number">500</span>, <span class="string">"promise1 resolved"</span>);</div><div class="line">&#125;); </div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">  setTimeout(reject, <span class="number">100</span>, <span class="string">"promise2 rejected"</span>);</div><div class="line">&#125;);  </div><div class="line"><span class="built_in">Promise</span>.race([p1, p2]).then(<span class="function"><span class="keyword">function</span>(<span class="params">values</span>)</span>&#123; </div><div class="line">  <span class="built_in">console</span>.log(values); <span class="comment">// promise2 rejected</span></div><div class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">reason</span>)</span>&#123; <span class="built_in">console</span>.log(reason); &#125;);</div><div class="line"><span class="comment">//promise2状态先发生改变，变为rejected，故输出promise2 rejected</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">  setTimeout(resolve, <span class="number">500</span>, <span class="string">"promise1 resolved"</span>);</div><div class="line">&#125;); </div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">  setTimeout(reject, <span class="number">1000</span>, <span class="string">"promise2 rejected"</span>);</div><div class="line">&#125;);  </div><div class="line"><span class="built_in">Promise</span>.race([p1, p2]).then(<span class="function"><span class="keyword">function</span>(<span class="params">values</span>)</span>&#123; </div><div class="line">  <span class="built_in">console</span>.log(values); <span class="comment">//promise1 resolved</span></div><div class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">reason</span>)</span>&#123; <span class="built_in">console</span>.log(reason); &#125;);</div><div class="line"><span class="comment">//promise1状态先发生改变，变为resolved，故输出promise1 resolved</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="三-Promise链式调用"><a href="#三-Promise链式调用" class="headerlink" title="三 Promise链式调用"></a>三 Promise链式调用</h3><p>Promise的链式调用，也就是以promise().then().then().catch() 的形式去使用Promise。<br>首先了理解下面两个Promise基本API的作用。<br>Promise.resolve(value):返回一个以给定值解析后的Promise对象。<br>romise.reject(reason):返回一个用reason拒绝的Promise。<br>接下来看一个简单的链式调用的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNewPromise</span>(<span class="params">promiseName</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,  reject</span>)</span>&#123;</div><div class="line">        resolve(promiseName);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">getNewPromise(<span class="string">'promise1'</span>).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(data+<span class="string">" resolved"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">'promise2'</span>);</div><div class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(data+<span class="string">" resolved"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'promise3 rejected'</span>);</div><div class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(data+<span class="string">" resolved"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">'promise4'</span>);</div><div class="line">&#125;).catch(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(reason);</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">'promise5'</span>);</div><div class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(data+<span class="string">" resolved"</span>);</div><div class="line">&#125;);</div><div class="line"><span class="comment">//输出：</span></div><div class="line"><span class="comment">//promise1 resolved</span></div><div class="line"><span class="comment">//promise2 resolved</span></div><div class="line"><span class="comment">//promise3 rejected</span></div><div class="line"><span class="comment">//promise5 resolved</span></div></pre></td></tr></table></figure></p>
<p>Promise链式调用归结为以下几点</p>
<ul>
<li>promise 的 then 方法里面可以继续返回一个新的 promise 对象，以供链式调用。</li>
<li>下一个then方法的data参数是上一个promise对象的resolve参数。</li>
<li>catch方法的参数是其之前某个promise对象的rejecte参数。</li>
<li>一旦某个then方法里面的promise状态改变为了rejected则promise 方法连会跳过后面的then直接去执行catch。</li>
<li>catch方法里面依旧可以返回一个新的promise对象。</li>
</ul>
<h3 id="四-Promise的实际使用"><a href="#四-Promise的实际使用" class="headerlink" title="四 Promise的实际使用"></a>四 Promise的实际使用</h3><p>我们先构建一个异步场景，有三个任务需要执行，且这三个任务的执行顺序一定是Task1、Task2、Task3，任意一个任务的失败都会导致后续任务不能执行。我们最开始想到的实现方式也许类似下面的代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">BeginTask</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="literal">true</span><span class="comment">/*Task1成功执行*/</span>)&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Task1 执行成功'</span>);</div><div class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span>(<span class="literal">true</span><span class="comment">/*Task2成功执行*/</span>)&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'Task2 执行成功'</span>);</div><div class="line">                setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                    <span class="keyword">if</span>(<span class="literal">true</span><span class="comment">/*Task3成功执行*/</span>)&#123;</div><div class="line">                        <span class="built_in">console</span>.log(<span class="string">'Task3 执行成功'</span>);</div><div class="line">                    &#125;<span class="keyword">else</span>&#123;</div><div class="line">                        <span class="built_in">console</span>.log(<span class="string">'Task3 执行失败'</span>);</div><div class="line">                    &#125;</div><div class="line">                &#125;,<span class="number">0</span>);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'Task2 执行失败'</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;,<span class="number">0</span>);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Task1 执行失败'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">BeginTask();</div><div class="line"><span class="comment">//输出为：</span></div><div class="line"><span class="comment">//Task1 执行成功</span></div><div class="line"><span class="comment">//Task2 执行成功</span></div><div class="line"><span class="comment">//Task3 执行成功</span></div></pre></td></tr></table></figure></p>
<p>上述的实现方式有许多缺点，比如当业务逻辑复杂的时候，回掉的嵌套过多，代码复杂度增加，代码的可读性降低，并且代码的维护与调试都复杂许多。下面我们用Promise链式调用来重新实现一下。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Task1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,  reject</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="literal">true</span><span class="comment">/*Task1成功执行*/</span>)&#123;</div><div class="line">            resolve(<span class="string">'Task1执行成功'</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            reject(<span class="string">'Task1执行失败'</span>);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Task2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,  reject</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="literal">true</span><span class="comment">/*Task1成功执行*/</span>)&#123;</div><div class="line">            resolve(<span class="string">'Task2执行成功'</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            reject(<span class="string">'Task2执行失败'</span>);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Task3</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,  reject</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="literal">true</span><span class="comment">/*Task1成功执行*/</span>)&#123;</div><div class="line">            resolve(<span class="string">'Task3执行成功'</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            reject(<span class="string">'Task3执行失败'</span>);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">Task1().then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">    <span class="keyword">return</span> Task2();</div><div class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">    <span class="keyword">return</span> Task3();</div><div class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">'所有任务执行完成'</span>);</div><div class="line">&#125;).catch(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(reason);</div><div class="line">&#125;);</div><div class="line"><span class="comment">//输出为：</span></div><div class="line"><span class="comment">//Task1执行成功</span></div><div class="line"><span class="comment">//Task2执行成功</span></div><div class="line"><span class="comment">//Task3执行成功</span></div></pre></td></tr></table></figure></p>
<p>在上面的代码中，实例化了三个 promise 对象，分别实现三个任务的需求。然后通过promise方法链来调用。相比用回调函数而言，代码结构更加清晰，也更易读易懂耦合度更低更易扩展了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2017/04/09/ES6新特性之promise/" data-id="cj1lx27pt0001xgo0c01pbhy4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原生DOM接口实现表格的排序" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/07/原生DOM接口实现表格的排序/" class="article-date">
  <time datetime="2017-04-07T12:25:00.000Z" itemprop="datePublished">2017-04-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/07/原生DOM接口实现表格的排序/">原生DOM接口学习之实现表格的排序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一-原生DOM接口介绍"><a href="#一-原生DOM接口介绍" class="headerlink" title="一 原生DOM接口介绍"></a>一 原生DOM接口介绍</h3><h5 id="1-节点的增删改查"><a href="#1-节点的增删改查" class="headerlink" title="1.节点的增删改查"></a>1.节点的增删改查</h5><ul>
<li>a.增加节点<br>在DOM上添加节点首先需要创建节点，document.createElement()用于创建元素节点，document.createTextNode()用于创建文本节点。然后使用element.appendChild()、element.insertBefore()添加节点。</li>
<li>b.删除节点 element.removeChild()用于删除子节点,element.replaceChild()用于替换子节点</li>
<li>c.修改节点，element.setAttribute()用于修改节点属性,element.removeAttribute()用于删除节点属性</li>
<li>d.查找结点 <ol>
<li>根据ID查找节点：document.getElementById()</li>
<li>根据标签名查找节点：document.getElementsByTagName()</li>
<li>根据Name属性查找结点；document.getElementsByName()</li>
<li>根据Class属性查找节点document.getElementsByClassName()</li>
<li>查找父节点：element.parentNode</li>
<li>查找子节点：element.childNodes,element.firstChild,element.lastChild</li>
<li>查找兄弟节点：element.nextSibling,element.previousSibling</li>
</ol>
</li>
</ul>
<h3 id="二-实现表格数据的排序与动态添加"><a href="#二-实现表格数据的排序与动态添加" class="headerlink" title="二 实现表格数据的排序与动态添加"></a>二 实现表格数据的排序与动态添加</h3><p>表格如下图所示，我们可以向表格动态添加数据，也可以让表格的数据按照某列降序排列。</p>
<h5 id="动态添加数据函数"><a href="#动态添加数据函数" class="headerlink" title="动态添加数据函数"></a>动态添加数据函数</h5><p>当点击添加按钮时候触发的函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTableRow</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> stu_name = <span class="built_in">document</span>.getElementById(<span class="string">'stu-name'</span>),<span class="comment">//学生姓名输入框</span></div><div class="line">        grade_ch = <span class="built_in">document</span>.getElementById(<span class="string">'grade-ch'</span>),<span class="comment">//语文成绩输入框</span></div><div class="line">        grade_en = <span class="built_in">document</span>.getElementById(<span class="string">'grade-en'</span>),<span class="comment">//英语成绩输入框</span></div><div class="line">        grade_ma = <span class="built_in">document</span>.getElementById(<span class="string">'grade-ma'</span>),<span class="comment">//数学成绩输入框</span></div><div class="line">        grade_total = <span class="built_in">parseInt</span>(grade_ch.value) + <span class="built_in">parseInt</span>(grade_ma.value) + <span class="built_in">parseInt</span>(grade_en.value),<span class="comment">//总分</span></div><div class="line">        mytable = <span class="built_in">document</span>.getElementById(<span class="string">'mytable'</span>),</div><div class="line">        tbody = mytable.getElementsByTagName(<span class="string">'tbody'</span>)[<span class="number">0</span>],</div><div class="line">        newItem = <span class="built_in">document</span>.createElement(<span class="string">'tr'</span>);<span class="comment">//新的一行</span></div><div class="line">        newItem.innerHTML = <span class="string">"&lt;td&gt;"</span> + stu_name.value + <span class="string">"&lt;/td&gt;&lt;td&gt;"</span> + grade_ch.value + <span class="string">"&lt;/td&gt;&lt;td&gt;"</span> + </div><div class="line">          grade_ma.value + <span class="string">"&lt;/td&gt;&lt;td&gt;"</span> + grade_en.value + <span class="string">"&lt;/td&gt;&lt;td&gt;"</span> + grade_total + <span class="string">"&lt;/td&gt;"</span>;</div><div class="line">        tbody.appendChild(newItem);<span class="comment">//添加新的一行</span></div><div class="line">        <span class="comment">//添加完成输入框置空</span></div><div class="line">        stu_name.value = <span class="string">""</span>;</div><div class="line">        grade_ch.value = <span class="string">""</span>;</div><div class="line">        grade_en.value = <span class="string">""</span>;</div><div class="line">        grade_ma.value = <span class="string">""</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="表格排序函数"><a href="#表格排序函数" class="headerlink" title="表格排序函数"></a>表格排序函数</h5><p>当点击排序按钮时候触发的函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">tableSort</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> myselect = <span class="built_in">document</span>.getElementById(<span class="string">'myselect'</span>),</div><div class="line">        mytable = <span class="built_in">document</span>.getElementById(<span class="string">'mytable'</span>);</div><div class="line">    <span class="keyword">if</span>(!mytable || !myselect)&#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> value = myselect.value;</div><div class="line">    <span class="comment">//根据下拉框选择根据什么进行排序</span></div><div class="line">    <span class="keyword">switch</span>(value)&#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">"english"</span>:sortByNum(<span class="number">3</span>);<span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">"chinese"</span>:sortByNum(<span class="number">1</span>);<span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">"math"</span>:sortByNum(<span class="number">2</span>);<span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">"total"</span>:sortByNum(<span class="number">4</span>);<span class="keyword">break</span>;</div><div class="line">        <span class="keyword">default</span>:alert(<span class="string">'选择错误！'</span>);<span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortByNum</span>(<span class="params">colCnt</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> mytable = <span class="built_in">document</span>.getElementById(<span class="string">'mytable'</span>),</div><div class="line">        tbody = mytable.getElementsByTagName(<span class="string">'tbody'</span>)[<span class="number">0</span>],</div><div class="line">        lists = tbody.getElementsByTagName(<span class="string">'tr'</span>),<span class="comment">//表格的所有行</span></div><div class="line">        newLists = [],<span class="comment">//把lists拷贝到数组中，方便排序，同时也减少访问DOM次数。</span></div><div class="line">        newTbody = <span class="built_in">document</span>.createElement(<span class="string">'tbody'</span>);</div><div class="line">    <span class="comment">//将表格的所有行复制到数组newLists中</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>, len = lists.length; i &lt; len; i ++)&#123;</div><div class="line">        newLists.push(lists[i].cloneNode(<span class="literal">true</span>));</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//对数组newLists进行冒泡排序</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newLists.length - <span class="number">1</span>; i++)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; newLists.length - <span class="number">1</span> - i; j++)&#123;</div><div class="line">            <span class="keyword">let</span> value1 = <span class="built_in">parseInt</span>(newLists[j].getElementsByTagName(<span class="string">'td'</span>)[colCnt].innerHTML);</div><div class="line">            <span class="keyword">let</span> value2 = <span class="built_in">parseInt</span>(newLists[j+<span class="number">1</span>].getElementsByTagName(<span class="string">'td'</span>)[colCnt].innerHTML);</div><div class="line">            <span class="keyword">if</span>(value2 &gt; value1)&#123;</div><div class="line">                <span class="keyword">let</span> t = newLists[j+<span class="number">1</span>];</div><div class="line">                newLists[j+<span class="number">1</span>] = newLists[j];</div><div class="line">                newLists[j] = t;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//将排序过的行添加到新的tbody中</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>,len = newLists.length; i &lt; len; i++)&#123;</div><div class="line">        newTbody.appendChild(newLists[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//新的tbody替换旧的tbody</span></div><div class="line">    tbody.parentNode.replaceChild(newTbody,tbody);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="表格HTML结构"><a href="#表格HTML结构" class="headerlink" title="表格HTML结构"></a>表格HTML结构</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>dylist<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">        <span class="selector-class">.mydiv</span>&#123;</div><div class="line">            <span class="attribute">text-align</span>: center;</div><div class="line">        &#125;</div><div class="line">        <span class="selector-id">#mytable</span>&#123;</div><div class="line">            <span class="attribute">margin</span>: <span class="number">20px</span> auto;</div><div class="line">        &#125;</div><div class="line">        <span class="selector-tag">label</span>&#123;</div><div class="line">            <span class="attribute">line-height</span>: <span class="number">34px</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="selector-id">#mytable</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span>&#123;</div><div class="line">            <span class="attribute">position</span>: relative;</div><div class="line">        &#125;</div><div class="line">        <span class="selector-class">.delete</span>&#123;</div><div class="line">            <span class="attribute">position</span>: absolute;</div><div class="line">            <span class="attribute">top</span>: <span class="number">50px</span>;</div><div class="line">            <span class="attribute">left</span>: <span class="number">50px</span>;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mydiv"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"stu-name"</span>&gt;</span>姓名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"stu-name"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"grade-ch"</span>&gt;</span>语文：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"grade-ch"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"grade-ma"</span>&gt;</span>数学：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"grade-ma"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"grade-en"</span>&gt;</span>英语：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"grade-en"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"添加"</span> <span class="attr">onclick</span>=<span class="string">"addTableRow()"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">cellpadding</span>=<span class="string">"6"</span> <span class="attr">cellspacing</span>=<span class="string">"8"</span> <span class="attr">id</span>=<span class="string">"mytable"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">caption</span>&gt;</span>学生成绩表<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">thead</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>语文<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>数学<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>英语<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>总分<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>90<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>70<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>240<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>70<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>230<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>王五<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>90<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>90<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>260<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">    按&amp;nbsp;</div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"myselect"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"chinese"</span>&gt;</span>语文<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"math"</span>&gt;</span>数学<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"english"</span>&gt;</span>英语<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"total"</span>&gt;</span>总分<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span>&amp;nbsp;成绩&amp;nbsp;<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"排序"</span> <span class="attr">onclick</span>=<span class="string">"tableSort()"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2017/04/07/原生DOM接口实现表格的排序/" data-id="cj1lx27ro0009xgo0wbu1qehm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-jQuery插件之可动态修改列表" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/20/jQuery插件之可动态修改列表/" class="article-date">
  <time datetime="2017-03-20T11:59:00.000Z" itemprop="datePublished">2017-03-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/20/jQuery插件之可动态修改列表/">jQuery插件之动态列表</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>jQuery为我们的开发带来巨大的便利，当我们想实现一个独立的功能时候，我们可能会想到用jQuery插件来是一种不错的选择。jQuery在设计之初就为我们提供了扩展机制。我们可以通过以下三种方法实现插件开发。</p>
<ul>
<li>通过$.extend(),这种方法在jQuery身上而不是它的原型对象上添加了一个静态方法，一般通过$.myfunc()调用这种插件。</li>
<li>通过$.fn或者$.fn.extend(), 这种方法较为普遍，它向jQuery的原型对象上(也就是$.fn)上添加新的方法，可以通过$(‘’).myfunc()调用这种插件。</li>
<li>通过$.widget()应用jQuery UI的部件工厂方式创建，这种方法暂不介绍。<br>下面我们通过比较简单的第二种方式来实现jQuery插件。</li>
</ul>
<h2 id="实现jQuery插件"><a href="#实现jQuery插件" class="headerlink" title="实现jQuery插件"></a>实现jQuery插件</h2><h3 id="1-插件代码原型"><a href="#1-插件代码原型" class="headerlink" title="1.插件代码原型"></a>1.插件代码原型</h3><p>$.fn.extend(obj)是一种JavaScript的混入，就是把obj对象中的属性复制到jQuery的型对象中。我们用匿名函数自执行的方式来避免变量污染。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</div><div class="line">        $.fn.extend(&#123;</div><div class="line">            <span class="comment">//插件名，动态列表</span></div><div class="line">            <span class="string">"addDyList"</span> : <span class="function"><span class="keyword">function</span>(<span class="params">options</span>)</span>&#123;</div><div class="line">                <span class="comment">//用传进来的参数覆盖默认参数</span></div><div class="line">                <span class="keyword">var</span> configs = $.extend(&#123;&#125;, defaults, options);</div><div class="line">            &#125;,</div><div class="line">                </div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//默认参数</span></div><div class="line">        <span class="keyword">var</span> defaults = &#123;</div><div class="line">            <span class="string">'values'</span> : [<span class="string">'HTML'</span>,<span class="string">'CSS'</span>,<span class="string">'JavaScript'</span>],</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">//插件私有方法，增加一个列表项</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">newList</span>(<span class="params">lvalue</span>)</span>&#123;</div><div class="line">           </div><div class="line">        &#125;;</div><div class="line">        <span class="comment">//插件私有方法，从array中删除val</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">deleteFromArray</span>(<span class="params">array, val</span>)</span>&#123;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">//插件私有方法，更新array的某个值</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">updateArray</span>(<span class="params">array, oldVal, newVal</span>)</span>&#123;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">    &#125;)(<span class="built_in">window</span>.jQuery);</div></pre></td></tr></table></figure></p>
<p>以上代码是动态列表插件模型。</p>
<h3 id="2-插件用法"><a href="#2-插件用法" class="headerlink" title="2.插件用法"></a>2.插件用法</h3><p>插件名叫做addDyList，它在某个选定的target元素上添加一个动态列表作为target的子元素。参数是一个对象，在对象中可以为动态列表传入初始数组和回掉函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'target'</span>).addDyList(&#123;</div><div class="line">        <span class="comment">//初始化列表的数组</span></div><div class="line">        <span class="string">'values'</span> : [<span class="string">'HTML'</span>,<span class="string">'CSS'</span>,<span class="string">'JavaScript'</span>],</div><div class="line">        <span class="comment">//动态列表编辑完成之后的回掉函数，用于更新数据库</span></div><div class="line">        <span class="string">'oneditfinished'</span> : <span class="function"><span class="keyword">function</span>(<span class="params">vals</span>)</span>&#123;</div><div class="line">            <span class="comment">//用动态列表中的数组vals去更新数据库的操作</span></div><div class="line">        &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="3-插件demo与源代码"><a href="#3-插件demo与源代码" class="headerlink" title="3.插件demo与源代码"></a>3.插件demo与源代码</h3><p>demo：<a href="https://justlemon.github.io/jQueryPlugin/dyListPlugin/index.html" target="_blank" rel="external">https://justlemon.github.io/jQueryPlugin/dyListPlugin/index.html</a><br>代码地址：<a href="https://github.com/justLemon/jQueryPlugin" target="_blank" rel="external">https://github.com/justLemon/jQueryPlugin</a></p>
<h3 id="4-插件实现原理"><a href="#4-插件实现原理" class="headerlink" title="4.插件实现原理"></a>4.插件实现原理</h3><p>利用jQuery对DOM操作的封装，我们可以很较为轻松的实现动态列表插件。</p>
<ol>
<li>插件的每个元素都有一个css类与之对应，我们可以用css自定义动态列表的外观。</li>
<li>点击编辑目录时，进入列表的编辑状态，取消a标签的默认行为。让当前菜单消失，新菜单出现，新菜单拥有添加目录、删除目录、修改目录、返回等按钮。</li>
<li>点击添加目录时，给列表动态添加一个包含输入框的列表项，用户可以选择确认或者取消来确认是否添加。</li>
<li>点击删除目录时，显示每个列表项中隐藏的多选框，用户可以选择要删除的目录。</li>
<li>点击修改目录时，显示每个列表项中隐藏的修改按钮。当点击修改按钮时，将当前列表项替换为带有输入框的列表项。注意替换时候需要将旧值作为data属性赋值给新的列表项，以便列表数据的更新。</li>
<li>点击返回时，退出列表的编辑状态，恢复a标签的默认行为，让当前菜单消失。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2017/03/20/jQuery插件之可动态修改列表/" data-id="cj1lx27r60007xgo0ajub28sb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript学习系列之深入原型链与继承的实现" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/22/JavaScript学习系列之深入原型链与继承的实现/" class="article-date">
  <time datetime="2017-02-22T06:21:00.000Z" itemprop="datePublished">2017-02-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/22/JavaScript学习系列之深入原型链与继承的实现/">JavaScript学习系列之深入原型链与继承的实现</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>JavaScript是一种解释型语言，它不需要编译成二进制文件，是一种动态语言。不同于Java中继承的实现方式，JavaScript实现继承主要依靠强大的原型链机制来实现。</p>
<h3 id="一-原型链"><a href="#一-原型链" class="headerlink" title="一 原型链"></a>一 原型链</h3><p>访问一个对象的属性时，先在基本属性中查找，如果没有，JavaScript 会向上遍历原型链，直到找到给定名称的属性为止，到查找到达原型链的顶部（也就是 Object.prototype）仍然没有找到属性，就会返回undefined。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">obj.a <span class="comment">//输出undefined</span></div><div class="line"><span class="keyword">var</span> another = &#123; <span class="attr">a</span> : <span class="number">2</span>&#125;;</div><div class="line">obj.__proto__ = another;</div><div class="line">obj.a <span class="comment">//输出2</span></div></pre></td></tr></table></figure></p>
<h5 id="对象属性屏蔽问题"><a href="#对象属性屏蔽问题" class="headerlink" title="对象属性屏蔽问题"></a>对象属性屏蔽问题</h5><p>当读取一个对象obj的属性a时候，如果obj本身不存在属性名为a的属性，就去原型链中查找属性。但是在obj中写入一个属性a的时候，即执行赋值语句obj.a = 4时候，则分如下几种情况：</p>
<ul>
<li><p>如果obj对象中包含名为a的属性，那么它会屏蔽所有原型链上的名为a的属性。这条赋值语句只会修改已有的属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> another = &#123; <span class="attr">a</span> : <span class="number">2</span>&#125;;</div><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span> : <span class="number">4</span>&#125;;</div><div class="line">obj.__proto__ = another;</div><div class="line">obj.a <span class="comment">//输出4</span></div><div class="line">obj.a = <span class="number">5</span>;</div><div class="line">another.a <span class="comment">//输出2</span></div><div class="line">obj.a <span class="comment">//输出5</span></div></pre></td></tr></table></figure>
</li>
<li><p>如果obj对象中不包含名为a的属性，其原型链上包含名为a的属性且没有被标记为只读，那就会直接在obj中添加一个名为a的新属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> another = &#123; <span class="attr">a</span> : <span class="number">2</span>&#125;;</div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">obj.__proto__ = another;</div><div class="line">obj.a <span class="comment">//输出2</span></div><div class="line">obj.hasOwnProperty(<span class="string">'a'</span>)<span class="comment">//输出false</span></div><div class="line">obj.a = <span class="number">5</span>;</div><div class="line">another.a <span class="comment">//输出2</span></div><div class="line">obj.a <span class="comment">//输出5</span></div><div class="line">obj.hasOwnProperty(<span class="string">'a'</span>)<span class="comment">//输出true</span></div></pre></td></tr></table></figure>
</li>
<li><p>如果obj对象中不包含名为a的属性，其原型链上包含名为a的属性且被标记为只读，那么无法修改已有属性，也无法直接在obj中添加一个名为a的新属性。代码运行在严格模式下会报错。</p>
</li>
<li>如果obj对象中不包含名为a的属性，其原型链上包含名为a的属性并且它是一个setter,那就会调用这个setter，a不会被添加到obj中。</li>
</ul>
<ul>
<li>有些情况下会产生隐式屏蔽。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> another = &#123; <span class="attr">a</span> : <span class="number">2</span>&#125;;</div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">obj.__proto__ = another;</div><div class="line">another.a<span class="comment">//输出2</span></div><div class="line">obj.a<span class="comment">//输出2</span></div><div class="line">obj.hasOwnProperty(<span class="string">'a'</span>)<span class="comment">//输出false</span></div><div class="line">obj.a++;</div><div class="line">another.a<span class="comment">//输出2</span></div><div class="line">obj.a<span class="comment">//输出3</span></div><div class="line">obj.hasOwnProperty(<span class="string">'a'</span>)<span class="comment">//输出true</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>因为obj.a++相当于obj.a = obj.a + 1，也是一个赋值语句。</p>
<h3 id="二-原型链继承与类式继承结合（借用构造函数）"><a href="#二-原型链继承与类式继承结合（借用构造函数）" class="headerlink" title="二 原型链继承与类式继承结合（借用构造函数）"></a>二 原型链继承与类式继承结合（借用构造函数）</h3><p>需要注意的一点是原型继承中的原型是指函数的原型，即每个函数都有一个prototype属性与之对应。这需要与原型链中的<strong>proto</strong>属性区分开来。原型继承最重要的就是将父类的原型继承到子类上来。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//父类Animal</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Animal'</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//Animal公有方法</span></div><div class="line">Animal.prototype.breath = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is breathing!'</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 子类Bird</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bird</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="comment">//通过借用构造函数来实现对实例属性的继承</span></div><div class="line">  Animal.call(<span class="keyword">this</span>, name); </div><div class="line">&#125;</div><div class="line"><span class="comment">//使用原型链实现对原型属性和方法的继承</span></div><div class="line">Bird.prototype = <span class="built_in">Object</span>.create(Animal.prototype);</div><div class="line"><span class="comment">//Bird公有方法</span></div><div class="line">Bird.prototype.fly = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is flying!'</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//实例</span></div><div class="line"><span class="keyword">var</span> bird = <span class="keyword">new</span> Bird(<span class="string">'birdman'</span>);</div><div class="line">bird.breath();<span class="comment">//birdman is breathing!</span></div><div class="line">bird.fly();<span class="comment">//birdman is flying!</span></div></pre></td></tr></table></figure></p>
<p>上述代码中最重要的一句就是：<br>Bird.prototype = Object.create(Animal.prototype);。Object.create()方法会创建一个新的对象并把对象内部的<strong>proto</strong>属性（原型链）关联到指定的对象（本例中是Animal.prototype）。<br>注意：最好不要把这句话换成下面两种形式</p>
<ul>
<li>Bird.prototype = Animal.prototype;<br>这种形式并不会创建一个新对象，只是让Bird.prototype指向Animal.prototype，它们其实是一个对象。当我们为子类Bird的原型添加新的属性时，这个属性也相当于添加到Animal的原型中。这就导致其他类继承于Animal时，有了多余的属性。</li>
<li>Bird.prototype = new Animal();<br>这种形式的确可以创建一个关联到Animal.prototype的新对象。但是它有许多副作用，比如给Bird的原型添加多余的属性，或者可能做了一些不必要的操作，甚至可能影响Bird的“后代”。</li>
</ul>
<h3 id="三-模拟多重继承的混入机制"><a href="#三-模拟多重继承的混入机制" class="headerlink" title="三 模拟多重继承的混入机制"></a>三 模拟多重继承的混入机制</h3><p>JavaScript本身不提供多重继承的功能，使用多重继承的代价也太高。但是我们可以模拟实现多重继承，也就是混入机制。在jQuery中把混入叫做extend，我们一般把它叫做mixin。下面看非常简单的mixin函数。</p>
<h5 id="1-显式混入"><a href="#1-显式混入" class="headerlink" title="1.显式混入"></a>1.显式混入</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mixin</span>(<span class="params">sourceObj, targetObj</span>)</span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> sourceObj)&#123;</div><div class="line">        <span class="keyword">if</span>(!(key <span class="keyword">in</span> targetObj))&#123;</div><div class="line">            targetObj[key] = sourceObj[key];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> targetObj;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> Animal = &#123; </div><div class="line">    <span class="attr">name</span> : <span class="string">'Animal'</span>,</div><div class="line">    <span class="attr">breath</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is breathing!'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//创建一个空对象把Animal的内容复制进去</span></div><div class="line"><span class="keyword">var</span> Bird = mixin(Animal, &#123;&#125;);</div><div class="line"><span class="comment">//把新内容复制到bird中</span></div><div class="line">mixin(&#123;</div><div class="line">    <span class="attr">name</span> : <span class="string">'birdman'</span>,</div><div class="line">    <span class="attr">fly</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is flying!'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;, Bird);</div></pre></td></tr></table></figure>
<p>如果你向目标对象中显式混入超过一个对象，就可以模仿多重继承行为。但是仍没有直接的方式处理函数和属性的同名问题。有些库提出“晚绑定”技术，但是这些技术可能会降低性能得不偿失。</p>
<h5 id="2-寄生继承"><a href="#2-寄生继承" class="headerlink" title="2.寄生继承"></a>2.寄生继承</h5><p>显式混入的一种变体称为“寄生继承”。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//父类Animal</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Animal'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Animal.prototype.breath = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is breathing!'</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 寄生类Bird</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bird</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> bird = <span class="keyword">new</span> Animal();</div><div class="line"></div><div class="line">  bird.name = name || <span class="string">'bird'</span>;</div><div class="line">  bird.fly = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is flying!'</span>);</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">return</span> bird;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//实例</span></div><div class="line"><span class="keyword">var</span> bird = <span class="keyword">new</span> Bird(<span class="string">'birdman'</span>);</div><div class="line">bird.breath();<span class="comment">//birdman is breathing!</span></div><div class="line">bird.fly();<span class="comment">//birdman is flying!</span></div></pre></td></tr></table></figure></p>
<h3 id="3-隐式混入"><a href="#3-隐式混入" class="headerlink" title="3.隐式混入"></a>3.隐式混入</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Animal = &#123; </div><div class="line">    <span class="attr">name</span> : <span class="string">'Animal'</span>,</div><div class="line">    <span class="attr">breath</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is breathing!'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> Bird =&#123;</div><div class="line">    <span class="attr">name</span> : <span class="string">'birdman'</span>,</div><div class="line">    <span class="attr">breath</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//隐式把breath混入Bird中</span></div><div class="line">        Animal.breath.call(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2017/02/22/JavaScript学习系列之深入原型链与继承的实现/" data-id="cj1lx27qi0003xgo0svxq59vs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript正则表达式学习（上）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/07/JavaScript正则表达式学习（上）/" class="article-date">
  <time datetime="2016-12-07T06:08:00.000Z" itemprop="datePublished">2016-12-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/07/JavaScript正则表达式学习（上）/">JavaScript正则表达式学习（上）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一-正则表达式概念"><a href="#一-正则表达式概念" class="headerlink" title="一 正则表达式概念"></a>一 正则表达式概念</h3><p>正则表达式(regular expression)描述了一种字符串匹配的模式，可以用来检查一个串是否含有某种子串、将匹配的子串做替换或者从某个串中取出符合某个条件的子串等。<br>在学习正则表达式之前，需要先知道正则表达式的功能是什么，也就是我们为什么要用正则表达式。正则表达式强大之处在于它对字符串的搜索和替换。下面介绍它的常用功能。</p>
<ol>
<li>数据验证，也就是分析字符串内的模式。例如，可以测试输入字符串是否出现电话号码模式或邮箱号码模式。</li>
<li>替换文本，我们可以使用正则表达式来识别文档中的特定文本或字符串，然后可以用指定的文本去替换被识别的文本。</li>
<li>提取子字符串，可以用正则表达式去识别特定字符串并提取它。<br>在javascript中，正则表达式可以通过两种方式构造，一种是/exp/g，另一种为new RegExp(“exp”,”g”),其中exp为匹配模式。</li>
</ol>
<h3 id="二-正则表达式语法"><a href="#二-正则表达式语法" class="headerlink" title="二 正则表达式语法"></a>二 正则表达式语法</h3><h4 id="1-构造函数"><a href="#1-构造函数" class="headerlink" title="1.构造函数"></a>1.构造函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'hello'</span>,<span class="string">'g'</span>);</div></pre></td></tr></table></figure>
<h4 id="2-字面量"><a href="#2-字面量" class="headerlink" title="2.字面量"></a>2.字面量</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/hellog/g</span>;</div></pre></td></tr></table></figure>
<ul>
<li>g:global,表示全文搜索，默认是搜索到第一个结果就不再搜索</li>
<li>i：ignore case，忽略大小写，默认是不忽略大小写</li>
<li>m：multiple lines，多行搜索</li>
</ul>
<h3 id="三-正则表达式的特殊字符"><a href="#三-正则表达式的特殊字符" class="headerlink" title="三 正则表达式的特殊字符"></a>三 正则表达式的特殊字符</h3><h5 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h5><ul>
<li>“[abc]”:简单类，匹配字符集合。此处匹配abc中任意一个字符</li>
<li>“[a-z]”: 范围类，匹配字符范围内的字符，此处匹配a到z的任意小写字符</li>
<li>“[^abc]”：负向类，匹配字符范围以外的任意字符，此处匹配除了a到z之外的任意字符</li>
</ul>
<h5 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h5><ul>
<li>“^”：匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\n’ 或 ‘\r’ 之后的位置。 </li>
<li>“$”：匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\n’ 或 ‘\r’ 之前的位置。</li>
<li>“.”：除了换行和回车之外的任意字符，相当于[^\n\r]</li>
<li>“\w”：匹配字母，数字，下划线,相当于[a-zA-Z_0-9]</li>
<li>“\W”：匹配任意不是字母，数字，下划线 的字符[^a-zA-Z_0-9]</li>
<li>“\s”：匹配空白字符,相当于[\t\r\n\f\v]</li>
<li>“\S”：匹配任意非空白字符,相当于[^\t\r\n\f\v]</li>
<li>“\d”: 匹配数字,相当于[0-9]</li>
<li>“\D”: 匹配任意非数字的字符,,相当于[^0-9]</li>
<li>“.”：匹配除了换行符以外的任何字符,相当于[^\n\r]</li>
<li>“\b” :匹配一个字边界，即字与空格间的位置。如我想从字符串中”This is Regex”匹配单独的单词 “is” 正则就要写成 “\bis\b”。</li>
<li>“\B”:匹配非字边界</li>
<li>“a|b”:匹配字符a或者b</li>
<li>“\f”：匹配一个换页符。等价于”\x0c” </li>
<li>“\n”：匹配一个换行符。等价于”\x0a” </li>
<li>“\r”：匹配一个回车符。等价于”\x0d” </li>
<li>“\t”：匹配一个制表符。等价于”\x09”</li>
<li>“\v”：匹配一个垂直制表符。等价于”\x0b”</li>
<li>“\num”：匹配第num个匹配的引用，其中num是一个正整数。例如，’(.)\1’ 匹配两个连续的相同字符。</li>
</ul>
<h4 id="限定符（量词）"><a href="#限定符（量词）" class="headerlink" title="限定符（量词）"></a>限定符（量词）</h4><ul>
<li>“*”：重复零次或更多,尽可能多的重复</li>
<li>“+”：重复一次或更多次,尽可能多的重复</li>
<li>“?”：重复零次或一次,尽可能多的重复</li>
<li>“{n}” ：重复n次</li>
<li>“{n,m}”：重复n到m次,尽可能多的重复</li>
<li>“{n,}”：重复n次或更多次,尽可能多的重复<br>注意：*、+、？、{n,m}和{n,}限定符都是贪婪的，贪婪的意思就是尽可能多的重复，它们会尽可能多的匹配文字。只有在它们的后面加上一个?就可以实现非贪婪或最小匹配。例：对字符串”aaa”进行匹配，表达式”a+?”只能匹配到”a”,而”a+”却能匹配到”aaa”.</li>
</ul>
<h3 id="三-正则表达式函数"><a href="#三-正则表达式函数" class="headerlink" title="三 正则表达式函数"></a>三 正则表达式函数</h3><p>正则表达式函数<br><b>1.test方法（一般用于数据验证）</b><br>语法：regExp.test(stringObj)<br>regExp：正则表达式对象<br>stringObj：要进行检测的字符串<br>功能：该方法用来检测输入的字符串是否与正则表达式相匹配。匹配成功则返回true，不成功则返回false。该方法常用于数据验证，如验证email是否符合格式。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/^\d+@qq\.com$/</span>;</div><div class="line">reg.test(<span class="string">'123@qq.com'</span>);<span class="comment">//true</span></div><div class="line"></div><div class="line">/\d+\.\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;$/g.test(<span class="string">'123.25'</span>);<span class="comment">//true</span></div><div class="line">/\d+\.\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;$/g.test(<span class="string">'a.25'</span>);<span class="comment">//false</span></div></pre></td></tr></table></figure></p>
<p><b>2.exec方法（一般用于提取子字符串）</b><br>语法：regExp.exec(stringObj)<br>stringObj：被查找的字符串<br>regExp：正则表达式对象<br>功能：该方法返回一个数组，数组的第一个元素就是匹配的字符串。如果有子分组的话，数组第二个元素就是正则中的第一个子分组匹配的结果，第三个是正则中第二个子分组匹配的结果…以此类推。如果没有正则子分组，那么该数组长度仅仅为1。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d/g</span>;</div><div class="line">reg.test(<span class="string">'1a2b3c'</span>);<span class="comment">//true</span></div><div class="line"><span class="keyword">while</span>(r=reg.exec(<span class="string">'1a2b3c'</span>))&#123;</div><div class="line">    <span class="built_in">console</span>.log(r.index+<span class="string">':'</span>+r[<span class="number">0</span>]);</div><div class="line">&#125;</div><div class="line"><span class="comment">//结果为</span></div><div class="line"><span class="comment">//0：1</span></div><div class="line"><span class="comment">//2：2</span></div><div class="line"><span class="comment">//4：3</span></div></pre></td></tr></table></figure></p>
<p><b>3.match 方法（一般用于提取子字符串） </b><br>功能：使用正则表达式模式对字符串执行查找，并将包含查找的结果作为数组返回。功能与exec类似。<br>语法：stringObj.match(regExp)<br>stringObj 被查找的字符串<br>regExp 正则表达式对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var reg=/abc/;</div><div class="line">reg.exec(&apos;11abc11abcdef&apos;);//[&quot;abc&quot;]</div><div class="line">&apos;11abc11abcdef&apos;.match(reg);//[&quot;abc&quot;]</div><div class="line"></div><div class="line">var reg=/abc/g;</div><div class="line">reg.exec(&apos;11abc11abcdef&apos;);//[&quot;abc&quot;]</div><div class="line">&apos;11abc11abcdef&apos;.match(reg);//[&quot;abc&quot;,&quot;abc&quot;]</div><div class="line">//因为match执行了全局匹配查询；而exec如果没有子表达式只会找到一个匹配的即返回。</div></pre></td></tr></table></figure></p>
<p><b>4.replcae 方法（一般用于替换文本） </b><br>功能：使用正则表达式模式对字符串执行查找，用另外的字符串去替换匹配的字符串。<br>语法：stringObj.replcae(regExp,stringObj2);<br>stringObj 被查找的字符串<br>regExp 正则表达式对象<br>stringObj2 用于替换的字符串<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">'abcabcabc'</span>.replace(<span class="regexp">/bc/</span>,<span class="string">"A"</span>);<span class="comment">//aAabcabc</span></div><div class="line"><span class="string">'abcabcabc'</span>.replace(<span class="regexp">/bc/g</span>,<span class="string">"A"</span>)<span class="comment">//aAaAaA</span></div><div class="line"><span class="string">'123456789'</span>.replace(<span class="string">'\d&#123;3&#125;'</span>,<span class="string">"$1-"</span>);</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2016/12/07/JavaScript正则表达式学习（上）/" data-id="cj1lx27qq0004xgo00bwxb0kf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript学习系列之初识原型继承和原型链" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/31/JavaScript学习系列之初识原型继承和原型链/" class="article-date">
  <time datetime="2016-10-31T12:16:00.000Z" itemprop="datePublished">2016-10-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/31/JavaScript学习系列之初识原型继承和原型链/">JavaScript学习系列之初识原型继承和原型链</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="我们将JavaScript对象分为函数对象和普通对象。"><a href="#我们将JavaScript对象分为函数对象和普通对象。" class="headerlink" title="我们将JavaScript对象分为函数对象和普通对象。"></a>我们将JavaScript对象分为函数对象和普通对象。</h3><h4 id="函数对象"><a href="#函数对象" class="headerlink" title="函数对象"></a>函数对象</h4><p>用function关键字定义的对象或者对其使用typeof运算符返回”function”的对象。</p>
<ul>
<li><p>JavaScript引擎内置的函数对象（构造器）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typeof</span> <span class="built_in">Array</span><span class="comment">//"function"</span></div><div class="line"><span class="keyword">typeof</span> <span class="built_in">Number</span><span class="comment">//"function"</span></div><div class="line"><span class="keyword">typeof</span> <span class="built_in">Boolean</span><span class="comment">//"function"</span></div><div class="line"><span class="keyword">typeof</span> <span class="built_in">String</span><span class="comment">//"function"</span></div><div class="line"><span class="keyword">typeof</span> <span class="built_in">Object</span><span class="comment">//"function"</span></div><div class="line"><span class="keyword">typeof</span> <span class="built_in">Function</span><span class="comment">//"function"</span></div></pre></td></tr></table></figure>
</li>
<li><p>自定义的函数对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div><div class="line"><span class="keyword">typeof</span> Animal<span class="comment">//"function"</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="普通对象"><a href="#普通对象" class="headerlink" title="普通对象"></a>普通对象</h4><p>除了函数对象之外的其他对象都是普通对象。一般是大括号{}定义的对象或者new关键字返回的对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Array</span>();<span class="comment">//"object"</span></div><div class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">String</span>();<span class="comment">//"object"</span></div><div class="line"><span class="keyword">typeof</span> &#123;&#125;;<span class="comment">//"object"</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div><div class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> Animal(<span class="string">'kitty'</span>);<span class="comment">//"object"</span></div></pre></td></tr></table></figure></p>
<h4 id="函数对象与普通对象的异同"><a href="#函数对象与普通对象的异同" class="headerlink" title="函数对象与普通对象的异同"></a>函数对象与普通对象的异同</h4><ul>
<li>相同点<ol>
<li>它们都是JavaScript中的的对象</li>
<li>它们都有一个默认的<strong>proto</strong>属性（原型链的关键，后面详细解释）。</li>
</ol>
</li>
<li>不同点<ol>
<li>创建方式不同。函数对象需要用function关键字去定义。而普通对象一般由{}或new关键字来创建。</li>
<li>函数对象实际上是对象构造器，可以new一个函数对象返回一个普通对象。</li>
<li>对函数对象使用typeof运算符会返回function，而对普通对象使用的话返回object。</li>
<li>每一个函数对象都有一个原型对象（prototype）与之关联。，而普通对象没有。 </li>
</ol>
</li>
</ul>
<hr>
<h3 id="1-对象的prototype属性"><a href="#1-对象的prototype属性" class="headerlink" title="1.对象的prototype属性"></a>1.对象的prototype属性</h3><p>原型对象只有函数对象才有，普通对象一般是没有的。且每一个函数对象都有一个原型对象（prototype）与之相关联，一些常用的方法都保存在函数的原型对象中。如Array.prototype中就包含一些数组中常用的concat()、push()…等方法。我们首先需明确，原型对象本身是一个普通对象。<br>要注意的一点是，函数的原型对象除包含一些对象的公有方法之外，它还包含一个constructor属性，它指向与原型对象相关联的函数对象。</p>
<ul>
<li><p>JavaScript引擎内置的函数对象（构造器）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype);<span class="comment">//输出对应的原型对象，包含数组的常用方法。</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.constructor===<span class="built_in">Array</span>);<span class="comment">//true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.prototype.constructor===<span class="built_in">String</span>);<span class="comment">//true</span></div></pre></td></tr></table></figure>
</li>
<li><p>自定义的函数对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div><div class="line">Animal.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">&#125;</div><div class="line"><span class="keyword">typeof</span> Animal<span class="comment">//"function"</span></div><div class="line"><span class="built_in">console</span>.log(Animal.prototype.constructor===Animal);<span class="comment">//true</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-对象的proto属性"><a href="#2-对象的proto属性" class="headerlink" title="2.对象的proto属性"></a>2.对象的<strong>proto</strong>属性</h3><p>当我们访问普通对象的属性object.xxx时,如果object自己没有xxx属性,则向上延原型链查找,如果找到,则返回,没找到,则返回undefined。原型链通过什么来实现这种向上查找呢？没错，就是<strong>proto</strong>属性。<br>每一个对象都有<strong>proto</strong>属性，它在对象创建时默认存在，但一般我们都不去使用或者改变它。</p>
<ul>
<li><p>函数对象与其<strong>proto</strong>属性<br>所有函数(构造器)的<strong>proto</strong>都指向Function.prototype，它是一个空函数（Empty function）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.__proto__===<span class="built_in">Function</span>.prototype<span class="comment">//true</span></div><div class="line"><span class="built_in">Number</span>.__proto__===<span class="built_in">Function</span>.prototype<span class="comment">//true</span></div><div class="line"><span class="built_in">String</span>.__proto__===<span class="built_in">Function</span>.prototype<span class="comment">//true</span></div><div class="line">...</div></pre></td></tr></table></figure>
</li>
<li><p>普通对象与其<strong>proto</strong>属性<br><strong>普通对象的<strong>proto</strong>指向函数对象（构造器）的原型对象（prototype）。</strong><br>JavaScript引擎的内置构造函数生成的对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>: <span class="string">'tea'</span>&#125;;<span class="comment">//相当于new Object(obj)</span></div><div class="line"><span class="keyword">var</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];<span class="comment">//相当于new Array(1,2,3)</span></div><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/hello/g</span>;<span class="comment">//相当于new RegExp('hello','g');</span></div><div class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">var</span> err = <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'exception'</span>);</div><div class="line"> </div><div class="line"><span class="built_in">console</span>.log(obj.__proto__ === <span class="built_in">Object</span>.prototype) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(array.__proto__ === <span class="built_in">Array</span>.prototype)  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(reg.__proto__ === <span class="built_in">RegExp</span>.prototype) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(date.__proto__ === <span class="built_in">Date</span>.prototype)  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(err.__proto__ === <span class="built_in">Error</span>.prototype)  <span class="comment">// true</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>自定义构造函数生成的对象<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">'jack'</span>)</div><div class="line"><span class="built_in">console</span>.log(p.__proto__ === Person.prototype) <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<h3 id="3-原型继承"><a href="#3-原型继承" class="headerlink" title="3.原型继承"></a>3.原型继承</h3><p>要想理解JavaScript的继承，必须先区分实例与构造器的区别。首先，实例对象是普通对象，而构造器是函数对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">'jack'</span>)</div></pre></td></tr></table></figure></p>
<p>Person是构造器，也就是函数对象，它具有Person.prototype原型对象与之对应，它的<strong>proto</strong>属性值为Function.prototype。而p是实例，它是普通对象且没有原型，它的<strong>proto</strong>属性值为Person.prototype。<br>想要实现继承，最简单的方法就是让子类的原型指向父类的实例。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div><div class="line">Animal.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div><div class="line">Dog.prototype = <span class="keyword">new</span> Animal(<span class="string">'test'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> animal = <span class="keyword">new</span> Animal(<span class="string">'animal'</span>);</div><div class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Dog(<span class="string">'dog'</span>);</div><div class="line"><span class="built_in">console</span>.log(animal.getName());<span class="comment">//输出animal</span></div><div class="line"><span class="built_in">console</span>.log(dog.getName());<span class="comment">//输出dog</span></div></pre></td></tr></table></figure></p>
<h3 id="4-原型链"><a href="#4-原型链" class="headerlink" title="4.原型链"></a>4.原型链</h3><p>在了解上述各种属性之后，我们来看一个关于原型链的图。<br><img src="C:\Users\PC\Desktop\1.png" alt="Alt text"><br>当在对象的域中没有找到我们想要的属性时，js引擎会访问_proto<strong>指针指向的对象，并从中寻找要访问的属性，若找到，则返回属性。若没有找到，则继续访问当前</strong>proto<strong>指向的对象。以此类推，直到访问到Object.prototype.</strong>proto<strong>指向的对象（空对象）才停止。最后都没找到的话返回undefined。<br>所以真正形成原型链的是是每个对象的</strong>proto__属性，而不是函数的prototype属性</p>
<p>接下来，我们看一下3中继承的例子的原型链是怎样的。<br><img src="C:\Users\PC\Desktop\2.png" alt="Alt text"><br>从图中可以知道<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Dog();</div><div class="line">dog.__proto__ === Dog.prototype;<span class="comment">//true</span></div><div class="line">Dog.prototype.__proto__ === Animal.prototype;<span class="comment">//true</span></div><div class="line">dog.constructor === Animal;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2016/10/31/JavaScript学习系列之初识原型继承和原型链/" data-id="cj1lx27q90002xgo0s5rzwh3b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-css实现面包屑导航与冒泡框（border属性与伪类选择器）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/22/css实现面包屑导航与冒泡框（border属性与伪类选择器）/" class="article-date">
  <time datetime="2016-10-22T14:14:00.000Z" itemprop="datePublished">2016-10-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/22/css实现面包屑导航与冒泡框（border属性与伪类选择器）/">css实现面包屑导航与冒泡框（border属性与伪类选择器）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我们知道，CSS的boder属性用于控制对象的边框大小、颜色还有style。但是边框属性的作用除此之外还有很多。</p>
<h3 id="（1）用border属性与伪类选择器实现冒泡框"><a href="#（1）用border属性与伪类选择器实现冒泡框" class="headerlink" title="（1）用border属性与伪类选择器实现冒泡框"></a>（1）用border属性与伪类选择器实现冒泡框</h3><p>首先我们先用border属性做一个三角形。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">border</span>: 30<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fff</span>;</div><div class="line"><span class="selector-tag">border-left-color</span>: <span class="selector-tag">black</span>;</div></pre></td></tr></table></figure></p>
<p>三条边框为白色，一条边框为黑色，就实现一个黑色的三角形了。前提是拥有这个边框的对象无内容，也就是width和height都等于0.</p>
<p>然后我们实现一个矩形加三角形的提示框<br><img src="C:\Users\PC\Desktop\1.png" alt="Alt text"><br>其实现方式也很简单，首先先创建一个id为demo的div，用伪类after和before选择器在此div上增加两个三角形，两个三角形重叠，黑色三角形比白色三角形大写，这就产生了黑色边框的效果。css代码如下<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#demo</span>&#123;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">width</span>:<span class="number">200px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">border</span>:<span class="number">2px</span> solid black;</div><div class="line">&#125;</div><div class="line"><span class="selector-id">#demo</span><span class="selector-pseudo">:before</span>&#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">top</span>:<span class="number">50px</span>;</div><div class="line">    <span class="attribute">left</span>:<span class="number">200px</span>;</div><div class="line">    <span class="attribute">border</span>:<span class="number">30px</span>  solid <span class="number">#fff</span>;</div><div class="line">    <span class="attribute">border-left-color</span>: black;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-id">#demo</span><span class="selector-pseudo">:after</span>&#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">top</span>:<span class="number">54px</span>;</div><div class="line">    <span class="attribute">left</span>:<span class="number">200px</span>;</div><div class="line">    <span class="attribute">border</span>:<span class="number">26px</span>  solid transparent;</div><div class="line">    <span class="attribute">border-left-color</span>:<span class="number">#fff</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>接下来，我们把提示框做成圆形的。<br><img src="C:\Users\PC\Desktop\2.png" alt="Alt text"><br>其实现方式也只是多利用了border-radis属性，css代码如下<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#demo</span>&#123;</div><div class="line">    <span class="attribute">width</span>:<span class="number">260px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">150px</span>;</div><div class="line">    <span class="attribute">border</span>:<span class="number">2px</span> solid black;</div><div class="line">    <span class="attribute">margin</span>:<span class="number">0</span> auto;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">130px</span>/<span class="number">80px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-id">#demo</span><span class="selector-pseudo">:before</span>,<span class="selector-id">#demo</span><span class="selector-pseudo">:after</span>&#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">border</span>:solid transparent;</div><div class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-7deg);</div><div class="line">&#125;</div><div class="line"><span class="selector-id">#demo</span><span class="selector-pseudo">:before</span>&#123;</div><div class="line">    <span class="attribute">top</span>:<span class="number">50px</span>;</div><div class="line">    <span class="attribute">left</span>:<span class="number">260px</span>;</div><div class="line">    <span class="attribute">border-width</span>: <span class="number">5px</span> <span class="number">14px</span> <span class="number">24px</span> <span class="number">60px</span> ;</div><div class="line">    <span class="attribute">border-left-color</span>:black;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"><span class="selector-id">#demo</span><span class="selector-pseudo">:after</span>&#123;</div><div class="line">    <span class="attribute">top</span>:<span class="number">52px</span>;</div><div class="line">    <span class="attribute">left</span>:<span class="number">259px</span>;</div><div class="line">    <span class="attribute">border-width</span>: <span class="number">4px</span> <span class="number">14px</span> <span class="number">20px</span> <span class="number">57px</span> ;</div><div class="line">    <span class="attribute">border-left-color</span>:<span class="number">#fff</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="（2）用border属性与伪类选择器实现发面包屑导航"><a href="#（2）用border属性与伪类选择器实现发面包屑导航" class="headerlink" title="（2）用border属性与伪类选择器实现发面包屑导航"></a>（2）用border属性与伪类选择器实现发面包屑导航</h3><p><img src="C:\Users\PC\Desktop\3.png" alt="Alt text"><br>这种面包屑导航运用了多种伪类选择器。比如通过first-child与last-child分别选取了第一个和最后一个li元素，使它们的样式与中间的li元素样式不同。每一个li元素又通过before和after等伪类选择器结合border属性实现了类似胶囊状的外观。css代码如下<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">#crumbs&#123;</div><div class="line">    position: relative;</div><div class="line">&#125;</div><div class="line">#crumbs ul&#123;</div><div class="line">    list-style: none;</div><div class="line">&#125;</div><div class="line">#crumbs ul li a&#123;</div><div class="line">    position: relative;</div><div class="line">    float: left;</div><div class="line">    margin-right: 30px;</div><div class="line">    display: inline-block;</div><div class="line">    height: 30px;</div><div class="line">    padding:10px 20px 0 20px;</div><div class="line">    text-align: center;</div><div class="line">    background-color: #3498db;</div><div class="line">    color: #fff;</div><div class="line">    text-decoration: none;</div><div class="line">    font-size: 20px;</div><div class="line">&#125;</div><div class="line">#crumbs ul li a:after&#123;</div><div class="line">    position: absolute;</div><div class="line">    top:0px;</div><div class="line">    right:-20px;</div><div class="line">    content: "";</div><div class="line">    border-left: 20px solid #3498db;</div><div class="line">    border-top: 20px solid transparent;</div><div class="line">    border-bottom: 20px solid transparent;</div><div class="line">&#125;</div><div class="line">#crumbs ul li a:before&#123;</div><div class="line">    position: absolute;</div><div class="line">    top:0px;</div><div class="line">    left:-20px;</div><div class="line">    content:"";</div><div class="line">    border-left: 20px solid transparent;</div><div class="line">    border-top: 20px solid #3498db;</div><div class="line">    border-bottom: 20px solid #3498db;</div><div class="line">&#125;</div><div class="line">#crumbs ul li:first-child a&#123;</div><div class="line">    border-top-left-radius: 10px;</div><div class="line">    border-bottom-left-radius: 10px;</div><div class="line">    //background-color: red;</div><div class="line">&#125;</div><div class="line">#crumbs ul li:first-child a:before&#123;</div><div class="line">    display:none;</div><div class="line">&#125;</div><div class="line">#crumbs ul li:last-child a&#123;</div><div class="line">    border-top-right-radius: 10px;</div><div class="line">    border-bottom-right-radius: 10px;</div><div class="line">    //background-color: red;</div><div class="line">&#125;</div><div class="line">#crumbs ul li:last-child a:after&#123;</div><div class="line">    display:none;</div><div class="line">&#125;</div><div class="line">#crumbs ul li a:hover&#123;</div><div class="line">    background-color: rgba(0,0,0,0.8);</div><div class="line">&#125;</div><div class="line">#crumbs ul li a:hover:after&#123;</div><div class="line">    border-left-color: rgba(0,0,0,0.8);</div><div class="line">&#125;</div><div class="line">#crumbs ul li a:hover:before&#123;</div><div class="line">    border-top-color: rgba(0,0,0,0.8);</div><div class="line">    border-bottom-color:  rgba(0,0,0,0.8);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2016/10/22/css实现面包屑导航与冒泡框（border属性与伪类选择器）/" data-id="cj1lx27qz0005xgo0nnzbz1wh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javascript实现计数器理解this作用域" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/21/javascript实现计数器理解this作用域/" class="article-date">
  <time datetime="2016-10-21T13:25:00.000Z" itemprop="datePublished">2016-10-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/21/javascript实现计数器理解this作用域/">javascript实现计数器理解this作用域</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 众所周知，javascript的一大弊端便是全局作用域的使用。在想要计数的时候，定义一个全局变量计数显然是不可取的。利用面向对象编程的思想，我们想要实现一个计数器可能需要定义一个计数器类。但是想要利用javascript实现一个计数器，我们可以利用哪些方法呢？<br>首先，新手最先想到的可能是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function counter()&#123;</div><div class="line">   var cnt=0;</div><div class="line">   return ++cnt;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>但是，执行后是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">counter();//结果是1</div><div class="line">counter();//结果是1</div></pre></td></tr></table></figure></p>
<p>原因在于每次函数执行时候都把cnt重新定义并且初始化成0了。那么会想，怎么只让它初始化一次呢？自然我们想到的就是让cnt的定义和初始化只执行一次。于是有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function counter()&#123;</div><div class="line">   var cnt=0;</div><div class="line">   this.increase = function()&#123;</div><div class="line">      cnt++;</div><div class="line">      return cnt;</div><div class="line">   &#125;</div><div class="line">   return this;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var myCounter= counter();</div><div class="line">myCounter.increase();//结果是1</div><div class="line">myCounter.increase();//结果是2</div></pre></td></tr></table></figure></p>
<p>到这里，计数器就可以使用了。但是为什么counter函数要返回this呢？<br>原因在于函数未显式指定返回值时候它默认会返回undefined。<br>更重要的问题是：此时this指向的是谁呢？是counter对象吗？我们接下去进行测试：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(global.increase);//结果是[Function]</div></pre></td></tr></table></figure></p>
<p>以上测试说明this指向的是global。为什么this不指向自身而指向counter呢？<br>这就涉及this作用域的问题，this的指向取决于函数调用的模式。接下来介绍常用的函数调用模式</p>
<p>###（1）函数调用模式<br>当一个函数并非一个对象的属性的时候，他直接以functionName()的方式被调用时候，它的this指向的是global全局对象。上述counter函数的调用就是这种模式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">var counter = &#123;</div><div class="line">    cnt:0,</div><div class="line">    increase:function()&#123;</div><div class="line">        this.cnt++;</div><div class="line">        return this.cnt;</div><div class="line">    &#125;,</div><div class="line">    increaseTo:function(i)&#123;</div><div class="line">        var helper = function(i)&#123;</div><div class="line">            this.cnt=i;</div><div class="line">        &#125;</div><div class="line">        helper(i);//函数调用模式</div><div class="line">        return this.cnt;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">counter.increase();//结果是1</div><div class="line">counter.increase();//结果是2</div><div class="line">counter.increaseTo(9);//结果是2</div><div class="line">console.log(global.cnt);//结果是9</div></pre></td></tr></table></figure></p>
<p>上述helper的调用就是函数调用模式，由于helper内this指向的是全局对象，所以导致global.cnt值为9。此bug的改进可以将increaseTo函数改为如下形式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var counter = &#123;</div><div class="line">    cnt:0,</div><div class="line">    increase:function()&#123;</div><div class="line">        this.cnt++;</div><div class="line">        return this.cnt;</div><div class="line">    &#125;,</div><div class="line">    increaseTo:function(i)&#123;</div><div class="line">        var that = this;</div><div class="line">        var helper = function(i)&#123;</div><div class="line">            that.cnt=i;</div><div class="line">        &#125;</div><div class="line">        helper(i);//函数调用模式</div><div class="line">        return this.cnt;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">counter.increase();//结果是1</div><div class="line">counter.increase();//结果是2</div><div class="line">counter.increaseTo(9);//结果是9</div><div class="line">console.log(global.cnt);//结果是undefined</div></pre></td></tr></table></figure></p>
<h3 id="（2）方法调用模式"><a href="#（2）方法调用模式" class="headerlink" title="（2）方法调用模式"></a>（2）方法调用模式</h3><p>在面向对象编程中，我们知道对象具有各种属性。当一个函数被保存为对象的一个属性的时候，我们称它为一个方法。当一个方法被对象调用的时候，this指向了这个对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var counter = &#123;</div><div class="line">    cnt:0,</div><div class="line">    increase:function()&#123;</div><div class="line">        this.cnt++;</div><div class="line">        return this.cnt;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">counter.increase();//结果为1(方法调用模式)</div><div class="line">counter.increase();//结果为2(方法调用模式)</div></pre></td></tr></table></figure></p>
<p>counter是一个计时器对象，increase是计时器的一个方法。increase方法可以通过this去访问对象，因为此时this指向的就是调用它的counter对象。</p>
<h3 id="3-构造器调用模式"><a href="#3-构造器调用模式" class="headerlink" title="(3)构造器调用模式"></a>(3)构造器调用模式</h3><p>如果在一个函数前面带上new来调用，那么将创建一个包含该函数上下文的新对象。并且this将指向这个对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function Counter()&#123;</div><div class="line">   this.cnt=0;</div><div class="line">   this.increase = function()&#123;</div><div class="line">      this.cnt++;</div><div class="line">      return this.cnt;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var myCounter= new Counter();//构造器调用模式</div><div class="line">myCounter.increase();//结果是1</div><div class="line">myCounter.increase();//结果是2</div><div class="line">console.log(global.cnt);//结果是undefined</div></pre></td></tr></table></figure></p>
<p>结合new前缀调用的函数被称为构造器函数。按照约定，他们以首字母大写命名。</p>
<h3 id="（4）apply调用模式"><a href="#（4）apply调用模式" class="headerlink" title="（4）apply调用模式"></a>（4）apply调用模式</h3><p>格式Function.apply(obj,args);<br>通俗的讲，函数的功能就是把Function的代码放到obj内去执行，同时将args参数传递给Function。apply调用模式可以直接将Function函数的this指向obj。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function increase(cnt)&#123;</div><div class="line">    this.increase=function()&#123;</div><div class="line">        cnt++;</div><div class="line">        return cnt;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">function Counter()&#123;</div><div class="line">   var cnt=0;</div><div class="line">   increase.apply(this,[cnt]);</div><div class="line">&#125;</div><div class="line">var myCounter= new Counter();</div><div class="line">myCounter.increase();//结果是1</div><div class="line">myCounter.increase();//结果是2</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://qiuchabin.me/2016/10/21/javascript实现计数器理解this作用域/" data-id="cj1lx27rk0008xgo0i1qax21r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/04/15/github上使用hexo搭建个人博客/">github上使用hexo搭建个人博客</a>
          </li>
        
          <li>
            <a href="/2017/04/09/ES6新特性之promise/">ES6新特性之promise</a>
          </li>
        
          <li>
            <a href="/2017/04/07/原生DOM接口实现表格的排序/">原生DOM接口学习之实现表格的排序</a>
          </li>
        
          <li>
            <a href="/2017/03/20/jQuery插件之可动态修改列表/">jQuery插件之动态列表</a>
          </li>
        
          <li>
            <a href="/2017/02/22/JavaScript学习系列之深入原型链与继承的实现/">JavaScript学习系列之深入原型链与继承的实现</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>